#include <common.h>
#include <sys/develop.h>

void* func_ovl8_8037C7D4(dbUnknown5* arg0, dbUnknown5* arg1, dbFunction** arg2, s32* arg3, s32 arg4, s32 arg5, s32 arg6);
void func_ovl8_8037C92C(dbUnknown5* arg0, s32 arg1);
void func_ovl8_8037C9E4(dbUnknown5* arg0);
void func_ovl8_8037CA48(s32 arg0);
void func_ovl8_8037CA50(s32* arg);

// ovl8_5
extern void func_ovl8_80373640(s32 arg0);
extern void func_ovl8_80373650(dbUnknown5* arg0);
extern f32 func_ovl8_8037367C(f32* arg0);
extern f32 func_ovl8_80373684(Vec3f* arg0);
extern f32 func_ovl8_8037368C(Vec3f* arg0);
extern void func_ovl8_80373750(dbUnknown5* arg0, f32 arg1);
extern void func_ovl8_80373790(dbUnknown5* arg0, f32 arg1);
extern void func_ovl8_803737DC(dbUnknown5* arg0, f32 arg1);
extern void func_ovl8_80373930(dbUnknown5_2* arg0, char* arg1);
extern s32 func_ovl8_80373980(dbUnknown5* arg0);
extern void func_ovl8_80373988(dbUnknown5* arg0, s32 arg1);
extern void func_ovl8_80373ABC(s32 arg0);
extern s32 func_ovl8_80373AC4(dbUnknown5* arg0, db4Bytes arg1);
extern void func_ovl8_80373B28(dbUnknown5* arg0, db4Bytes arg1, s32 arg2);
extern void func_ovl8_803743C0(u16* arg0, u16 arg1);

// ovl8_2
extern void func_ovl8_803718FC(dbUnknownLinkStruct* arg0);
extern void func_ovl8_80371930(dbUnknownLinkStruct* arg0);
extern void func_ovl8_80371960(s32 arg0);
extern void func_ovl8_80371968(s32 arg0);
extern void func_ovl8_80371970(s32 arg0);
extern void func_ovl8_80371978(s32 arg0);
extern void func_ovl8_80371980(dbUnknown16* arg0, dbUnknown16* arg1);
extern void func_ovl8_803719A4(dbUnknown16* arg0, dbUnknown16* arg1);
extern void func_ovl8_803719C8(dbUnknownLinkStruct* arg0, s32 arg1);
extern void func_ovl8_80371A2C(dbUnknownLinkStruct* arg0);
extern void func_ovl8_80371AC4(s32 arg0);
extern void func_ovl8_80371ACC(s32 arg0, s32 arg1);
extern void func_ovl8_80371AD8(dbUnknownLinkStruct* arg0, s32 arg1);
extern sb32 func_ovl8_80371BCC(dbUnknownLinkStruct* arg0, s32 arg1);
extern void func_ovl8_80371B34(dbUnknownLinkStruct* arg0, s32 arg1);
extern void func_ovl8_80371B98(void *arg0, db4Bytes *arg1);
extern void func_ovl8_80371C2C(dbUnknownLinkStruct* arg0, dbBytesContainer *arg1);


extern void func_ovl8_80373694(void*);
extern void func_ovl8_80373E24(void*);
extern void func_ovl8_80373EA8(void*);
extern void func_ovl8_80373990(void*);
extern void func_ovl8_80373A28(void*);
extern void func_ovl8_80373B84(void*);
extern void func_ovl8_803743D8(void*);
extern void func_ovl8_80373BD4(void*);
extern void func_ovl8_80371C8C(void*);
extern void func_ovl8_80371D08(void*);
extern void func_ovl8_80371D64(void*);
extern void func_ovl8_80371D74(void*);
extern void func_ovl8_80371DC0(void*);
extern void func_ovl8_80371DD0(void*);
extern void func_ovl8_80371DDC(void*);
extern void func_ovl8_80371DE4(void*);
extern void func_ovl8_80371DF4(void*);
extern void func_ovl8_80371DFC(void*);
extern void func_ovl8_80371E04(void*);
extern void func_ovl8_80371E0C(void*);
extern void func_ovl8_80371E14(void*);
extern void func_ovl8_80371E1C(void*);
extern void func_ovl8_80371E24(void*);
extern void func_ovl8_80371E2C(void*);
extern void func_ovl8_80371E58(void*);
extern void func_ovl8_8037C344(void*);
extern void func_ovl8_8037C358(void*);
extern void func_ovl8_803721E8(void*);
extern void func_ovl8_80372250(void*);
extern void func_ovl8_803722A0(void*);
extern void func_ovl8_803722F0(void*);
extern void func_ovl8_80372348(void*);
extern void func_ovl8_80372360(void*);
extern void func_ovl8_8037CCC8(void*);
extern void func_ovl8_8037CD64(void*);
extern void func_ovl8_80373648(void*);
extern void func_ovl8_80371C50(void*);
extern void func_ovl8_80371CB8(void*);
extern void func_ovl8_80371DEC(void*);
extern void func_ovl8_80372224(void*);
extern void func_ovl8_80372358(void*);
extern void func_ovl8_803726CC(void*);



dbFunction D_ovl8_8038A1D0[] =
{
	0x0000, NULL,
	0x0000, func_ovl8_8037C92C,
	0x0000, func_ovl8_80373640,
	0x0000, func_ovl8_8037C9E4,
	0x0000, func_ovl8_80373650,
	0x0000, func_ovl8_8037367C,
	0x0000, func_ovl8_80373684,
	0x0000, func_ovl8_8037368C,
	0x0000, func_ovl8_80373694,
	0x0000, func_ovl8_80373750,
	0x0000, func_ovl8_80373790,
	0x0000, func_ovl8_803737DC,
	0x0000, func_ovl8_80373E24,
	0x0000, func_ovl8_80373EA8,
	0x0000, func_ovl8_80373930,
	0x0000, func_ovl8_80373980,
	0x0000, func_ovl8_80373988,
	0x0000, func_ovl8_80373990,
	0x0000, func_ovl8_80373A28,
	0x0000, func_ovl8_80373ABC,
	0x0000, func_ovl8_80373AC4,
	0x0000, func_ovl8_80373B28,
	0x0000, func_ovl8_80373B84,
	0x0000, func_ovl8_803743D8,
	0x0000, func_ovl8_80373BD4,
	0x0000, func_ovl8_803743C0,
	0x0000, func_ovl8_8037CA48,
	0x0000, NULL
};

dbFunction D_ovl8_8038A2B0[] =
{
	0x0000, NULL,
	0xFFAC, func_ovl8_8037C92C,
	0x0000, func_ovl8_803718FC,
	0x0000, func_ovl8_80371930,
	0x0000, func_ovl8_80371960,
	0x0000, func_ovl8_80371968,
	0x0000, func_ovl8_80371970,
	0x0000, func_ovl8_80371978,
	0x0000, func_ovl8_80371980,
	0x0000, func_ovl8_803719A4,
	0x0000, func_ovl8_803719C8,
	0x0000, func_ovl8_80371A2C,
	0xFFAC, func_ovl8_8037C9E4,
	0x0000, func_ovl8_80371AC4,
	0x0000, func_ovl8_80371ACC,
	0x0000, func_ovl8_80371AD8,
	0x0000, func_ovl8_80371B34,
	0x0000, func_ovl8_80371B98,
	0x0000, func_ovl8_80371BCC,
	0xFFAC, func_ovl8_80373650,
	0x0000, func_ovl8_80371C2C,
	0xFFEC, func_ovl8_80372224,
	0x0000, func_ovl8_80371C8C,
	0xFFEC, func_ovl8_80372358,
	0xFFAC, func_ovl8_80373640,
	0x0000, func_ovl8_80371D08,
	0x0000, func_ovl8_80371D64,
	0x0000, func_ovl8_80371D74,
	0x0000, func_ovl8_80371DC0,
	0x0000, func_ovl8_80371DD0,
	0x0000, func_ovl8_80371DDC,
	0x0000, func_ovl8_80371DE4,
	0xFFEC, func_ovl8_803726CC,
	0x0000, func_ovl8_80371DF4,
	0x0000, func_ovl8_80371DFC,
	0x0000, func_ovl8_80371E04,
	0x0000, func_ovl8_80371E0C,
	0x0000, func_ovl8_80371E14,
	0x0000, func_ovl8_80371E1C,
	0x0000, func_ovl8_80371E24,
	0x0000, func_ovl8_80371E2C,
	0x0000, func_ovl8_80371E58,
	0x0000, NULL
};

dbFunction D_ovl8_8038A408[] =
{
	0x0000, NULL,
	0xFF48, func_ovl8_8037C92C,
	0x0000, func_ovl8_8037C344,
	0x0000, func_ovl8_8037C358,
	0x0000, NULL
};

dbFunction D_ovl8_8038A430[] =
{
	0x0000, NULL,
	0xFFC0, func_ovl8_8037C92C,
	0xFFC0, func_ovl8_8037C9E4,
	0x0000, func_ovl8_803721E8,
	0x0000, func_ovl8_80372224,
	0x0000, func_ovl8_80372250,
	0x0000, func_ovl8_803722A0,
	0x0000, func_ovl8_803722F0,
	0x0000, func_ovl8_80372348,
	0x0000, func_ovl8_80372358,
	0x0000, func_ovl8_80372360,
	0x0000, func_ovl8_803726CC,
	0x0000, NULL,
	0x0000, NULL
};

dbFunction D_ovl8_8038A4A0[] =
{
	0x0000, NULL,
	0x0000, func_ovl8_8037CCC8,
	0x0000, func_ovl8_8037CD64,
	0x0000, func_ovl8_80373648,
	0x0000, func_ovl8_80373650,
	0x0000, func_ovl8_8037367C,
	0x0000, func_ovl8_80373684,
	0x0000, func_ovl8_8037368C,
	0x0000, func_ovl8_80373694,
	0x0000, func_ovl8_80373750,
	0x0000, func_ovl8_80373790,
	0x0000, func_ovl8_803737DC,
	0x0000, func_ovl8_80373E24,
	0x0000, func_ovl8_80373EA8,
	0x0000, func_ovl8_80373930,
	0x0000, func_ovl8_80373980,
	0x0000, func_ovl8_80373988,
	0x0000, func_ovl8_80373990,
	0x0000, func_ovl8_80373A28,
	0x0000, func_ovl8_80373ABC,
	0x0000, func_ovl8_80373AC4,
	0x0000, func_ovl8_80373B28,
	0x0000, func_ovl8_80373B84,
	0x0000, func_ovl8_803743D8,
	0x0000, func_ovl8_80373BD4,
	0x0000, func_ovl8_803743C0,
	0x0000, NULL
};

dbFunction D_ovl8_8038A578[] =
{
	0x0000, NULL,
	0xFFA4, func_ovl8_8037CCC8,
	0x0000, func_ovl8_803718FC,
	0x0000, func_ovl8_80371930,
	0x0000, func_ovl8_80371960,
	0x0000, func_ovl8_80371968,
	0x0000, func_ovl8_80371970,
	0x0000, func_ovl8_80371978,
	0x0000, func_ovl8_80371980,
	0x0000, func_ovl8_803719A4,
	0x0000, func_ovl8_803719C8,
	0x0000, func_ovl8_80371A2C,
	0xFFA4, func_ovl8_80373648,
	0x0000, func_ovl8_80371AC4,
	0x0000, func_ovl8_80371ACC,
	0x0000, func_ovl8_80371AD8,
	0x0000, func_ovl8_80371B34,
	0x0000, func_ovl8_80371B98,
	0x0000, func_ovl8_80371BCC,
	0xFFA4, func_ovl8_80373650,
	0x0000, func_ovl8_80371C2C,
	0x0000, func_ovl8_80371C50,
	0x0000, func_ovl8_80371C8C,
	0x0000, func_ovl8_80371CB8,
	0xFFA4, func_ovl8_8037CD64,
	0x0000, func_ovl8_80371D08,
	0x0000, func_ovl8_80371D64,
	0x0000, func_ovl8_80371D74,
	0x0000, func_ovl8_80371DC0,
	0x0000, func_ovl8_80371DD0,
	0x0000, func_ovl8_80371DDC,
	0x0000, func_ovl8_80371DE4,
	0x0000, func_ovl8_80371DEC,
	0x0000, func_ovl8_80371DF4,
	0x0000, func_ovl8_80371DFC,
	0x0000, func_ovl8_80371E04,
	0x0000, func_ovl8_80371E0C,
	0x0000, func_ovl8_80371E14,
	0x0000, func_ovl8_80371E1C,
	0x0000, func_ovl8_80371E24,
	0x0000, func_ovl8_80371E2C,
	0x0000, func_ovl8_80371E58,
	0x0000, NULL
};

dbFunction D_ovl8_8038A6D0[] =
{
	0x0000, NULL,
	0xFFB0, func_ovl8_8037CCC8,
	0x0000, func_ovl8_8037C344,
	0x0000, func_ovl8_8037C358,
	0x0000, NULL,
	0x0000, NULL
};

// 0x8037C6DC
void func_ovl8_8037C6DC(void*** arg0, s32* arg1, s32* arg2);

// 0x8037C660
s32 func_ovl8_8037C660(s32 arg0, s32 arg1)
{
	s32 temp_v0;
	s32 sp3C;
	s32 sp34;
	s32 sp30;
	s32 var_v1;

	func_ovl8_8037C6DC(arg1, &sp34, &sp30);
	temp_v0 = func_ovl8_803717A0(0xC4);
	if (temp_v0 != 0)
	{
		func_ovl8_8037C7D4(temp_v0, 0, 0, arg1, sp34, sp30, arg0);
		var_v1 = temp_v0;
	}
	else
		var_v1 = 0;

	return var_v1;
}

// 0x8037C6DC
void func_ovl8_8037C6DC(void*** arg0, s32* arg1, s32* arg2)
{
	void** temp_v0;

	temp_v0 = arg0[0x24/4];
	if (temp_v0 != NULL)
	{
		*arg1 = temp_v0[0x0/4];
		*arg2 = arg0[0x24/4][0x4/4];
		return;
	}
	*arg2 = 0;
	*arg1 = 0;
}

// 0x8037C710
void* func_ovl8_8037C710(dbUnknownLinkStruct* arg0, dbUnknownLinkStruct* arg1, dbUnknownLink* arg2);
#ifdef NON_MATCHING
void* func_ovl8_8037C710(dbUnknownLinkStruct* arg0, dbUnknownLinkStruct* arg1, dbUnknownLink* arg2)
{
	if ((arg0 != NULL) || ((arg0 = func_ovl8_803717A0(0xC4)) != NULL))
	{
		if (arg1 == NULL)
		{
			arg1 = &(arg0->unk_dbunkstruct_0x54),
			arg2 = arg0 + 2,
			func_ovl8_803717E0(arg1),
			func_ovl8_8037C2D0(arg2);
		}
		func_ovl8_80373C10(arg0, arg1, arg2);
		func_ovl8_80372430(&arg0->unk_dbunkstruct_0x40, arg1);
		arg0->unk_dbunkstruct_0x30 = &D_ovl8_8038A1D0,
		arg1->db_func = &D_ovl8_8038A2B0;
		arg2->unk_dbunklink_0x8 = &D_ovl8_8038A408;
		arg0->unk_dbunkstruct_0x4C = &D_ovl8_8038A430;
		func_ovl8_8037CA50(arg0);
	}
	return arg0;
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/ovl8/ovl8_11/func_ovl8_8037C710.s")
#endif /* NON_MATCHING */

// 0x8037C7D4
#ifdef NON_MATCHING
void* func_ovl8_8037C7D4(dbUnknown5* arg0, dbUnknown5* arg1, dbFunction** arg2, s32* arg3, s32 arg4, s32 arg5, s32 arg6)
{
	s16 var_v0;

	if ((arg0 != NULL) || (arg0 = func_ovl8_803717A0(0xC4), (arg0 != NULL)))
	{
		if (arg1 == NULL)
		{
			arg1 = &arg0->unk_dbunk5_0x54;
			arg2 = arg0->unk_dbunk5_0xB8;
			func_ovl8_803717E0(arg1, arg2);
			func_ovl8_8037C2D0(arg2);
		}
		func_ovl8_80373CC4(arg0, arg1, arg2, arg3, arg6);
		func_ovl8_803724B4(&arg0->unk_dbunk5_0x40, arg1, arg3, arg6, arg4 != 0 ? arg4 : arg5);
		arg0->unk_dbunk5_0x30 = &D_ovl8_8038A1D0;
		arg1->unk_dbunk5_0x58 = &D_ovl8_8038A2B0;
		arg2[0x8/4] = &D_ovl8_8038A408;
		arg0->unk_dbunk5_0x4C = &D_ovl8_8038A430;
		func_ovl8_8037CA50(arg0);
		arg0->unk_dbunk5_0xB0 = arg5;
		arg0->unk_dbunk5_0xB4 = arg4;
		switch (arg3[0x14/4])
		{
		case 0x5342544E:
			var_v0 = 0;
			break;
		case 0x534f5042:
			var_v0 = 2;
			break;
		case 0x53544742:
			var_v0 = 1;
			break;
		default:
			var_v0 = 0;
			break;
		}
		arg0->unk_dbunk5_0x3C.s_16 = var_v0;
	}
	return arg0;
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/ovl8/ovl8_11/func_ovl8_8037C7D4.s")
#endif /* NON_MATCHING */

// 0x8037C92C
void func_ovl8_8037C92C(dbUnknown5* arg0, s32 arg1);
#ifdef NON_MATCHING
void func_ovl8_8037C92C(dbUnknown5* arg0, s32 arg1)
{
	if (arg0 != NULL)
	{
		arg0->unk_dbunk5_0x30 = &D_ovl8_8038A1D0,
		arg0->unk_dbunk5_0x38->db_func = &D_ovl8_8038A2B0;
		arg0->unk_dbunk5_0x34->unk_dbunklink_0x8 = &D_ovl8_8038A408;
		arg0->unk_dbunk5_0x4C = &D_ovl8_8038A430;

		func_ovl8_80372554(&arg0->unk_dbunk5_0x40, 0);
		func_ovl8_80373D88(arg0, 0);

		if (arg1 != 0)
		{
			func_ovl8_8037C30C(arg0->unk_dbunk5_0x34, 0);
			func_ovl8_803718C4(arg0->unk_dbunk5_0x38, 0);
		}
		if (arg1 & 1)
		{
			func_ovl8_803717C0(arg0);
		}
	}
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/ovl8/ovl8_11/func_ovl8_8037C92C.s")
#endif /* NON_MATCHING */

// 0x8037C9E4
void func_ovl8_8037C9E4(dbUnknown5* arg0)
{
	dbUnknownLinkStruct *var_v0;
	dbUnknownLinkStruct *var_v1;

	if (arg0->unk_dbunk5_0x0 != 0.0f)
	{
		var_v0 = arg0->unk_dbunk5_0xB0;
		var_v1 = (var_v0 != 0) ? var_v0 : arg0->unk_dbunk5_0xB4;
		var_v0 = var_v1;
	}
	else
	{
		var_v0 = arg0->unk_dbunk5_0xB4;
	}

	arg0->unk_dbunk5_0x48 = var_v0;
	func_ovl8_803725DC(&arg0->unk_dbunk5_0x40, arg0);
}

// 0x8037CA48
void func_ovl8_8037CA48(s32 arg0) {}

// 0x8037CA50
void func_ovl8_8037CA50(s32* arg)
{
	arg[0xb4/4] = 0;
	arg[0xb0/4] = 0;
}